'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var DangerzoneWritingPluginSettings = /** @class */ (function () {
    function DangerzoneWritingPluginSettings() {
        this.countdownSeconds = "60";
        this.secondsUntilDeletion = "5";
        this.succesfullSessionCount = "0";
        this.customEditorFontSize = "";
        this.customEditorBackgroundColor = "";
    }
    DangerzoneWritingPluginSettings.prototype.getCountdownSecondsInteger = function () {
        return parseInt(this.countdownSeconds);
    };
    DangerzoneWritingPluginSettings.prototype.getSecondsUntilDeletionInteger = function () {
        return parseInt(this.secondsUntilDeletion);
    };
    DangerzoneWritingPluginSettings.prototype.getSuccesfullSessionCountInteger = function () {
        return parseInt(this.succesfullSessionCount);
    };
    DangerzoneWritingPluginSettings.prototype.getCustomEditorFontSizeCssString = function () {
        if (this.customEditorFontSize != "") {
            return "font-size: " + this.customEditorFontSize + "pt";
        }
        else {
            return "";
        }
    };
    DangerzoneWritingPluginSettings.prototype.getCustomEditorBackgroundColorCssString = function () {
        if (this.customEditorBackgroundColor != "") {
            return "background-color: " + this.customEditorBackgroundColor;
        }
        else {
            return "";
        }
    };
    return DangerzoneWritingPluginSettings;
}());

var ExtractHighlightsPluginSettingsTab = /** @class */ (function (_super) {
    __extends(ExtractHighlightsPluginSettingsTab, _super);
    function ExtractHighlightsPluginSettingsTab(app, plugin) {
        var _this = _super.call(this, app, plugin) || this;
        _this.plugin = plugin;
        return _this;
    }
    ExtractHighlightsPluginSettingsTab.prototype.display = function () {
        var _this = this;
        var containerEl = this.containerEl;
        containerEl.empty();
        containerEl.createEl("h2", { text: "Dangerzone Writing Plugin" });
        containerEl.createEl("h3", { text: "Your Writing Stats" });
        containerEl.createEl("p", { text: "Successfully completed sessions: " + this.plugin.settings.succesfullSessionCount });
        containerEl.createEl("h3", { text: "Writing Session Timing Settings" });
        new obsidian.Setting(containerEl)
            .setName("Countdown Seconds")
            .setDesc("How many seconds you want your Dangerzone Writing session to last")
            .addText(function (text) {
            return text
                .setPlaceholder("100")
                .setValue(_this.plugin.settings.countdownSeconds)
                .onChange(function (value) {
                _this.plugin.settings.countdownSeconds = value;
                _this.plugin.saveData(_this.plugin.settings);
            });
        });
        new obsidian.Setting(containerEl)
            .setName("Dangerzone Seconds")
            .setDesc("How many seconds until your text is deleted")
            .addText(function (text) {
            return text
                .setPlaceholder("5")
                .setValue(_this.plugin.settings.secondsUntilDeletion)
                .onChange(function (value) {
                _this.plugin.settings.secondsUntilDeletion = value;
                _this.plugin.saveData(_this.plugin.settings);
            });
        });
        containerEl.createEl("h3", { text: "Immersive Writing Settings" });
        new obsidian.Setting(containerEl)
            .setName("Session Font-Size")
            .setDesc("Increases editor font-size temporarily for a more immersive experience. Leave empty to keep default size")
            .addText(function (text) {
            return text
                .setPlaceholder("32")
                .setValue(_this.plugin.settings.customEditorFontSize)
                .onChange(function (value) {
                _this.plugin.settings.customEditorFontSize = value;
                _this.plugin.saveData(_this.plugin.settings);
            });
        });
        new obsidian.Setting(containerEl)
            .setName("Session Background Color")
            .setDesc("Changes background color of editor temporarily for a more immersive experience. Leave empty to omit")
            .addText(function (text) {
            return text
                .setPlaceholder("black, maroon, #CCC")
                .setValue(_this.plugin.settings.customEditorBackgroundColor)
                .onChange(function (value) {
                _this.plugin.settings.customEditorBackgroundColor = value;
                _this.plugin.saveData(_this.plugin.settings);
            });
        });
        containerEl.createEl("hr");
        containerEl.createEl("h3", { text: "Thank You" });
        containerEl.createEl("p", { text: "Thank you ryanjamurphy, roberthaisfield, macedotavares, afokapu, tristanbailey, lukeleppan, AutonomyGaps and hicsuntdragons for your feedback and support." });
        containerEl.createEl("a", {
            text: "Visit the forum for feedback",
            href: "https://forum.obsidian.md/t/dangerzone-flowstate-like-plugin-prototype/8776/"
        });
        containerEl.createEl("h3", { text: "Disclaimer" });
        containerEl.createEl("i", { text: "This plugin is provided as-is with NO warranty that it'll work exactly as you expect. It's made to DELETE text in a note after X seconds of inactivity when you're start a session. Please do not hold me responsible if it does, in fact, DELETE your text. That's what it does. On the other hand there is always the possibility of a bug that makes this plugin behave unexpectedly." });
    };
    return ExtractHighlightsPluginSettingsTab;
}(obsidian.PluginSettingTab));

var CountdownTimer = /** @class */ (function () {
    function CountdownTimer(counter, editor, statusBar, activeLeaf, secondsUntilDeletion, plugin) {
        var _this = this;
        this.counter = counter;
        this.plugin = plugin;
        this.editor = editor;
        this.secondsUntilDeletion = secondsUntilDeletion;
        this.secondsRemaining = secondsUntilDeletion;
        this.activeLeaf = activeLeaf;
        this.counter = counter;
        this.originalCountdownSeconds = counter;
        this.editor.getWrapperElement().setAttribute("id", "active-dangerzone-editor");
        this.intervalId = setInterval(function () {
            _this.counter = _this.counter - 1;
            _this.secondsRemaining = _this.secondsRemaining - 1;
            if (_this.secondsRemaining < _this.secondsUntilDeletion && _this.editor.getValue().length > 0) {
                var opacity = _this.getOpacityForSecondsRemaining(_this.secondsRemaining, _this.secondsUntilDeletion);
                _this.editor.getWrapperElement().setAttribute("style", "opacity:" + opacity + "%");
                statusBar.setText("" + _this.secondsRemaining);
                statusBar.setAttr('style', 'color: red;');
            }
            else {
                _this.editor.getWrapperElement().setAttribute("style", "opacity: 100%");
                statusBar.setText(_this.counter + " seconds left");
                statusBar.setAttr('style', 'color: #999;');
            }
            if (_this.secondsRemaining <= 0) {
                _this.editor.setValue('');
                _this.secondsRemaining = _this.secondsUntilDeletion + 1;
            }
            if (_this.counter === 0) {
                statusBar.setText("");
                new obsidian.Notice("Dangerzone session finished!");
                _this.editor.getWrapperElement().setAttribute("style", "opacity: 100%");
                _this.plugin.removeStyle();
                // Save progress if there's something written
                if (_this.editor.getValue().length > 0) {
                    var currentSettings = _this.plugin.settings;
                    currentSettings.succesfullSessionCount = (currentSettings.getSuccesfullSessionCountInteger() + 1).toString();
                    _this.plugin.saveData(currentSettings);
                }
                clearInterval(_this.intervalId);
            }
        }, 1000);
    }
    CountdownTimer.prototype.getOpacityForSecondsRemaining = function (secondsRemaining, secondsUntilDeletion) {
        // 3 / 5
        return secondsRemaining / secondsUntilDeletion * 100;
    };
    CountdownTimer.prototype.resetCountdown = function () {
        this.counter = this.originalCountdownSeconds;
    };
    CountdownTimer.prototype.resetSecondUntilDeletion = function () {
        // important: add +1 to this.secondsUntilDeletion to account for at least one key-stroke
        this.secondsRemaining = this.secondsUntilDeletion + 1;
    };
    CountdownTimer.prototype.isFinished = function () {
        return this.counter <= 0;
    };
    return CountdownTimer;
}());

var svgPath = '<path d="M49.5122 90C29.3926 89.7355 13.1468 73.5337 12.8816 53.4685C13.1468 33.4032 29.3926 17.2014 49.5122 16.9369C69.6319 17.2014 85.8776 33.4032 86.1428 53.4685C85.8776 73.5337 69.6319 89.7355 49.5122 90ZM49.5122 25.0551C33.8635 25.2605 21.2278 37.8621 21.0217 53.4685C21.2278 69.0749 33.8635 81.6764 49.5122 81.8819C65.1609 81.6764 77.7967 69.0749 78.0027 53.4685C77.7967 37.8621 65.1609 25.2605 49.5122 25.0551ZM53.5823 73.7638H45.4421V57.5275H29.1619V49.4094H45.4421V33.1732H53.5823V49.4094H69.8625V57.5275H53.5823V73.7638ZM83.2612 27.9289L71.0144 15.7517L76.7491 10L89 22.1772L83.2612 27.9248V27.9289ZM15.7673 27.9289L10 22.1772L22.1736 10L27.9327 15.7476L15.7673 27.9248V27.9289Z" fill="#646464"/>';
obsidian.addIcon('watch', svgPath);
var DangerzoneWritingPlugin = /** @class */ (function (_super) {
    __extends(DangerzoneWritingPlugin, _super);
    function DangerzoneWritingPlugin() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.handleKeyDown = function (cm, event) {
            if (_this.countdown) {
                _this.countdown.resetSecondUntilDeletion();
            }
        };
        return _this;
    }
    DangerzoneWritingPlugin.prototype.onload = function () {
        var _this = this;
        this.loadSettings();
        this.addSettingTab(new ExtractHighlightsPluginSettingsTab(this.app, this));
        this.statusBar = this.addStatusBarItem();
        this.addRibbonIcon('watch', 'Dangerzone Writing', function () {
            _this.startOrContinueTimer();
        });
        this.registerEvent(this.app.on("codemirror", function (cm) {
            cm.on("keydown", _this.handleKeyDown);
        }));
        this.addCommand({
            id: "dangerzone-session-start",
            name: "Shortcut for starting a Dangerzone Writing session",
            callback: function () { return _this.startOrContinueTimer(); },
            hotkeys: [
                {
                    modifiers: ["Alt", "Shift"],
                    key: "‚ÅÑ",
                },
            ],
        });
    };
    DangerzoneWritingPlugin.prototype.startOrContinueTimer = function () {
        this.setCustomStyle();
        if (this.countdown && !this.countdown.isFinished()) {
            this.countdown.resetCountdown();
        }
        else {
            this.startTimer();
        }
    };
    DangerzoneWritingPlugin.prototype.onunload = function () {
        this.removeStyle();
        clearInterval(this.countdown.intervalId);
    };
    DangerzoneWritingPlugin.prototype.loadSettings = function () {
        var _this = this;
        this.settings = new DangerzoneWritingPluginSettings();
        (function () { return __awaiter(_this, void 0, void 0, function () {
            var loadedSettings;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.loadData()];
                    case 1:
                        loadedSettings = _a.sent();
                        if (loadedSettings) {
                            console.log("Found existing settings file for Dangerzone Writing");
                            this.settings.countdownSeconds = loadedSettings.countdownSeconds;
                            this.settings.secondsUntilDeletion = loadedSettings.secondsUntilDeletion;
                            this.settings.succesfullSessionCount = loadedSettings.succesfullSessionCount;
                            this.settings.customEditorFontSize = loadedSettings.customEditorFontSize;
                            this.settings.customEditorBackgroundColor = loadedSettings.customEditorBackgroundColor;
                        }
                        else {
                            console.log("No settings file found, creating for Dangerzone Writing");
                            this.saveData(this.settings);
                        }
                        return [2 /*return*/];
                }
            });
        }); })();
    };
    DangerzoneWritingPlugin.prototype.startTimer = function () {
        var activeLeaf = this.app.workspace.activeLeaf;
        var mdView = this.app.workspace.activeLeaf.view;
        if (mdView && mdView.sourceMode) {
            var cmEditor = mdView.sourceMode.cmEditor;
            if (cmEditor) {
                this.countdown = new CountdownTimer(this.settings.getCountdownSecondsInteger(), cmEditor, this.statusBar, activeLeaf, this.settings.getSecondsUntilDeletionInteger(), this);
                new obsidian.Notice("Dangerzone Writing session started!");
            }
            else {
                new obsidian.Notice("No editor active");
            }
        }
        else {
            new obsidian.Notice("No file open.");
        }
    };
    DangerzoneWritingPlugin.prototype.setCustomStyle = function () {
        var css = document.createElement('style');
        css.id = 'dangerzone-writing-style';
        var customEditorFontSizeCssString = this.settings.getCustomEditorFontSizeCssString();
        var customEditorBackgroundColor = this.settings.getCustomEditorBackgroundColorCssString();
        css.innerText = "\n            #active-dangerzone-editor { \n                " + customEditorFontSizeCssString + ";\n                " + customEditorBackgroundColor + ";             \n            }";
        document.getElementsByTagName("head")[0].appendChild(css);
        this.updateStyle();
    };
    DangerzoneWritingPlugin.prototype.updateStyle = function () {
        this.app.workspace.trigger('css-change');
    };
    DangerzoneWritingPlugin.prototype.removeStyle = function () {
        document.getElementById('dangerzone-writing-style').remove();
        this.app.workspace.trigger('css-change');
    };
    return DangerzoneWritingPlugin;
}(obsidian.Plugin));

module.exports = DangerzoneWritingPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9EYW5nZXJ6b25lV3JpdGluZ1BsdWdpblNldHRpbmdzLnRzIiwic3JjL0V4dHJhY3RIaWdobGlnaHRzUGx1Z2luU2V0dGluZ3NUYWIudHMiLCJzcmMvQ291bnRkb3duVGltZXIudHMiLCJzcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHByaXZhdGVNYXAsIHZhbHVlKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZU1hcC5zZXQocmVjZWl2ZXIsIHZhbHVlKTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEYW5nZXJ6b25lV3JpdGluZ1BsdWdpblNldHRpbmdzIHtcbiAgICBwdWJsaWMgY291bnRkb3duU2Vjb25kczogc3RyaW5nO1xuICAgIHB1YmxpYyBzZWNvbmRzVW50aWxEZWxldGlvbjogc3RyaW5nO1xuICAgIHB1YmxpYyBzdWNjZXNmdWxsU2Vzc2lvbkNvdW50OiBzdHJpbmc7XG4gICAgcHVibGljIGN1c3RvbUVkaXRvckZvbnRTaXplOiBzdHJpbmc7XG4gICAgcHVibGljIGN1c3RvbUVkaXRvckJhY2tncm91bmRDb2xvcjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY291bnRkb3duU2Vjb25kcyA9IFwiNjBcIjtcbiAgICAgICAgdGhpcy5zZWNvbmRzVW50aWxEZWxldGlvbiA9IFwiNVwiO1xuICAgICAgICB0aGlzLnN1Y2Nlc2Z1bGxTZXNzaW9uQ291bnQgPSBcIjBcIjtcbiAgICAgICAgdGhpcy5jdXN0b21FZGl0b3JGb250U2l6ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuY3VzdG9tRWRpdG9yQmFja2dyb3VuZENvbG9yID0gXCJcIjtcbiAgICB9XG5cbiAgICBnZXRDb3VudGRvd25TZWNvbmRzSW50ZWdlcigpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuY291bnRkb3duU2Vjb25kcyk7XG4gICAgfVxuXG4gICAgZ2V0U2Vjb25kc1VudGlsRGVsZXRpb25JbnRlZ2VyKCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zZWNvbmRzVW50aWxEZWxldGlvbik7XG4gICAgfVxuXG4gICAgZ2V0U3VjY2VzZnVsbFNlc3Npb25Db3VudEludGVnZXIoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN1Y2Nlc2Z1bGxTZXNzaW9uQ291bnQpO1xuICAgIH1cblxuICAgIGdldEN1c3RvbUVkaXRvckZvbnRTaXplQ3NzU3RyaW5nKCkge1xuICAgICAgICBpZih0aGlzLmN1c3RvbUVkaXRvckZvbnRTaXplICE9IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBgZm9udC1zaXplOiAke3RoaXMuY3VzdG9tRWRpdG9yRm9udFNpemV9cHRgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRDdXN0b21FZGl0b3JCYWNrZ3JvdW5kQ29sb3JDc3NTdHJpbmcoKSB7XG4gICAgICAgIGlmKHRoaXMuY3VzdG9tRWRpdG9yQmFja2dyb3VuZENvbG9yICE9IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLmN1c3RvbUVkaXRvckJhY2tncm91bmRDb2xvcn1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IERhbmdlcnpvbmVXcml0aW5nUGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXh0cmFjdEhpZ2hsaWdodHNQbHVnaW5TZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcGx1Z2luOiBEYW5nZXJ6b25lV3JpdGluZ1BsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IERhbmdlcnpvbmVXcml0aW5nUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHt0ZXh0OiBcIkRhbmdlcnpvbmUgV3JpdGluZyBQbHVnaW5cIn0pO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwge3RleHQ6IFwiWW91ciBXcml0aW5nIFN0YXRzXCJ9KTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge3RleHQ6IFwiU3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZCBzZXNzaW9uczogXCIgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdWNjZXNmdWxsU2Vzc2lvbkNvdW50fSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7dGV4dDogXCJXcml0aW5nIFNlc3Npb24gVGltaW5nIFNldHRpbmdzXCJ9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ291bnRkb3duIFNlY29uZHNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiSG93IG1hbnkgc2Vjb25kcyB5b3Ugd2FudCB5b3VyIERhbmdlcnpvbmUgV3JpdGluZyBzZXNzaW9uIHRvIGxhc3RcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMTAwXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3VudGRvd25TZWNvbmRzKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3VudGRvd25TZWNvbmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRGFuZ2Vyem9uZSBTZWNvbmRzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhvdyBtYW55IHNlY29uZHMgdW50aWwgeW91ciB0ZXh0IGlzIGRlbGV0ZWRcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiNVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2Vjb25kc1VudGlsRGVsZXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlY29uZHNVbnRpbERlbGV0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHt0ZXh0OiBcIkltbWVyc2l2ZSBXcml0aW5nIFNldHRpbmdzXCJ9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2Vzc2lvbiBGb250LVNpemVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiSW5jcmVhc2VzIGVkaXRvciBmb250LXNpemUgdGVtcG9yYXJpbHkgZm9yIGEgbW9yZSBpbW1lcnNpdmUgZXhwZXJpZW5jZS4gTGVhdmUgZW1wdHkgdG8ga2VlcCBkZWZhdWx0IHNpemVcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMzJcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUVkaXRvckZvbnRTaXplKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21FZGl0b3JGb250U2l6ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNlc3Npb24gQmFja2dyb3VuZCBDb2xvclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaGFuZ2VzIGJhY2tncm91bmQgY29sb3Igb2YgZWRpdG9yIHRlbXBvcmFyaWx5IGZvciBhIG1vcmUgaW1tZXJzaXZlIGV4cGVyaWVuY2UuIExlYXZlIGVtcHR5IHRvIG9taXRcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiYmxhY2ssIG1hcm9vbiwgI0NDQ1wiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRWRpdG9yQmFja2dyb3VuZENvbG9yKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21FZGl0b3JCYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaHJcIik7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7dGV4dDogXCJUaGFuayBZb3VcIn0pO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge3RleHQ6IFwiVGhhbmsgeW91IHJ5YW5qYW11cnBoeSwgcm9iZXJ0aGFpc2ZpZWxkLCBtYWNlZG90YXZhcmVzLCBhZm9rYXB1LCB0cmlzdGFuYmFpbGV5LCBsdWtlbGVwcGFuLCBBdXRvbm9teUdhcHMgYW5kIGhpY3N1bnRkcmFnb25zIGZvciB5b3VyIGZlZWRiYWNrIGFuZCBzdXBwb3J0LlwifSk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYVwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlZpc2l0IHRoZSBmb3J1bSBmb3IgZmVlZGJhY2tcIixcbiAgICAgICAgICAgIGhyZWY6IFwiaHR0cHM6Ly9mb3J1bS5vYnNpZGlhbi5tZC90L2RhbmdlcnpvbmUtZmxvd3N0YXRlLWxpa2UtcGx1Z2luLXByb3RvdHlwZS84Nzc2L1wiXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7dGV4dDogXCJEaXNjbGFpbWVyXCJ9KTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJpXCIsIHt0ZXh0OiBcIlRoaXMgcGx1Z2luIGlzIHByb3ZpZGVkIGFzLWlzIHdpdGggTk8gd2FycmFudHkgdGhhdCBpdCdsbCB3b3JrIGV4YWN0bHkgYXMgeW91IGV4cGVjdC4gSXQncyBtYWRlIHRvIERFTEVURSB0ZXh0IGluIGEgbm90ZSBhZnRlciBYIHNlY29uZHMgb2YgaW5hY3Rpdml0eSB3aGVuIHlvdSdyZSBzdGFydCBhIHNlc3Npb24uIFBsZWFzZSBkbyBub3QgaG9sZCBtZSByZXNwb25zaWJsZSBpZiBpdCBkb2VzLCBpbiBmYWN0LCBERUxFVEUgeW91ciB0ZXh0LiBUaGF0J3Mgd2hhdCBpdCBkb2VzLiBPbiB0aGUgb3RoZXIgaGFuZCB0aGVyZSBpcyBhbHdheXMgdGhlIHBvc3NpYmlsaXR5IG9mIGEgYnVnIHRoYXQgbWFrZXMgdGhpcyBwbHVnaW4gYmVoYXZlIHVuZXhwZWN0ZWRseS5cIn0pO1xuICAgIH1cbn0iLCJpbXBvcnQge05vdGljZSwgV29ya3NwYWNlTGVhZn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRGFuZ2Vyem9uZVdyaXRpbmdQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb3VudGRvd25UaW1lciB7XG4gICAgcHVibGljIGludGVydmFsSWQ6IE5vZGVKUy5UaW1lb3V0O1xuICAgIGVkaXRvcjogQ29kZU1pcnJvci5FZGl0b3I7XG4gICAgYWN0aXZlTGVhZjogV29ya3NwYWNlTGVhZjtcbiAgICBzZWNvbmRzVW50aWxEZWxldGlvbjogbnVtYmVyO1xuICAgIHNlY29uZHNSZW1haW5pbmc6IG51bWJlcjtcbiAgICBwbHVnaW46IERhbmdlcnpvbmVXcml0aW5nUGx1Z2luO1xuICAgIG9yaWdpbmFsQ291bnRkb3duU2Vjb25kczogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGNvdW50ZXI6IG51bWJlciwgZWRpdG9yOiBDb2RlTWlycm9yLkVkaXRvciwgc3RhdHVzQmFyOiBIVE1MRWxlbWVudCwgYWN0aXZlTGVhZjogV29ya3NwYWNlTGVhZiwgc2Vjb25kc1VudGlsRGVsZXRpb246IG51bWJlciwgcGx1Z2luOiBEYW5nZXJ6b25lV3JpdGluZ1BsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgIHRoaXMuc2Vjb25kc1VudGlsRGVsZXRpb24gPSBzZWNvbmRzVW50aWxEZWxldGlvbjtcbiAgICAgICAgdGhpcy5zZWNvbmRzUmVtYWluaW5nID0gc2Vjb25kc1VudGlsRGVsZXRpb247XG4gICAgICAgIHRoaXMuYWN0aXZlTGVhZiA9IGFjdGl2ZUxlYWY7XG4gICAgICAgIHRoaXMuY291bnRlciA9IGNvdW50ZXI7XG4gICAgICAgIHRoaXMub3JpZ2luYWxDb3VudGRvd25TZWNvbmRzID0gY291bnRlcjtcblxuICAgICAgICB0aGlzLmVkaXRvci5nZXRXcmFwcGVyRWxlbWVudCgpLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWN0aXZlLWRhbmdlcnpvbmUtZWRpdG9yXCIpO1xuXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5jb3VudGVyID0gdGhpcy5jb3VudGVyIC0gMTtcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kc1JlbWFpbmluZyA9IHRoaXMuc2Vjb25kc1JlbWFpbmluZyAtIDE7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlY29uZHNSZW1haW5pbmcgPCB0aGlzLnNlY29uZHNVbnRpbERlbGV0aW9uICYmIHRoaXMuZWRpdG9yLmdldFZhbHVlKCkubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZ2V0T3BhY2l0eUZvclNlY29uZHNSZW1haW5pbmcodGhpcy5zZWNvbmRzUmVtYWluaW5nLCB0aGlzLnNlY29uZHNVbnRpbERlbGV0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5nZXRXcmFwcGVyRWxlbWVudCgpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwib3BhY2l0eTpcIiArIG9wYWNpdHkgKyBcIiVcIik7XG5cbiAgICAgICAgICAgICAgICBzdGF0dXNCYXIuc2V0VGV4dChgJHt0aGlzLnNlY29uZHNSZW1haW5pbmd9YCk7XG4gICAgICAgICAgICAgICAgc3RhdHVzQmFyLnNldEF0dHIoJ3N0eWxlJywgJ2NvbG9yOiByZWQ7Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFdyYXBwZXJFbGVtZW50KCkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJvcGFjaXR5OiAxMDAlXCIpO1xuXG4gICAgICAgICAgICAgICAgc3RhdHVzQmFyLnNldFRleHQoYCR7dGhpcy5jb3VudGVyfSBzZWNvbmRzIGxlZnRgKTtcbiAgICAgICAgICAgICAgICBzdGF0dXNCYXIuc2V0QXR0cignc3R5bGUnLCAnY29sb3I6ICM5OTk7Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlY29uZHNSZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldFZhbHVlKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY29uZHNSZW1haW5pbmcgPSB0aGlzLnNlY29uZHNVbnRpbERlbGV0aW9uICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnRlciA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN0YXR1c0Jhci5zZXRUZXh0KFwiXCIpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEYW5nZXJ6b25lIHNlc3Npb24gZmluaXNoZWQhXCIpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm9wYWNpdHk6IDEwMCVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVtb3ZlU3R5bGUoKTtcblxuICAgICAgICAgICAgICAgIC8vIFNhdmUgcHJvZ3Jlc3MgaWYgdGhlcmUncyBzb21ldGhpbmcgd3JpdHRlblxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZWRpdG9yLmdldFZhbHVlKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5zdWNjZXNmdWxsU2Vzc2lvbkNvdW50ID0gKGN1cnJlbnRTZXR0aW5ncy5nZXRTdWNjZXNmdWxsU2Vzc2lvbkNvdW50SW50ZWdlcigpICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZURhdGEoY3VycmVudFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApXG4gICAgfVxuXG4gICAgZ2V0T3BhY2l0eUZvclNlY29uZHNSZW1haW5pbmcoc2Vjb25kc1JlbWFpbmluZzogbnVtYmVyLCBzZWNvbmRzVW50aWxEZWxldGlvbjogbnVtYmVyKSB7XG4gICAgICAgIC8vIDMgLyA1XG4gICAgICAgIHJldHVybiBzZWNvbmRzUmVtYWluaW5nIC8gc2Vjb25kc1VudGlsRGVsZXRpb24gKiAxMDA7XG4gICAgfVxuXG4gICAgcmVzZXRDb3VudGRvd24oKSB7XG4gICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMub3JpZ2luYWxDb3VudGRvd25TZWNvbmRzO1xuICAgIH1cblxuICAgIHJlc2V0U2Vjb25kVW50aWxEZWxldGlvbigpIHtcbiAgICAgICAgLy8gaW1wb3J0YW50OiBhZGQgKzEgdG8gdGhpcy5zZWNvbmRzVW50aWxEZWxldGlvbiB0byBhY2NvdW50IGZvciBhdCBsZWFzdCBvbmUga2V5LXN0cm9rZVxuICAgICAgICB0aGlzLnNlY29uZHNSZW1haW5pbmcgPSB0aGlzLnNlY29uZHNVbnRpbERlbGV0aW9uICsgMTtcbiAgICB9XG5cbiAgICBpc0ZpbmlzaGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudGVyIDw9IDA7XG4gICAgfVxufSIsImltcG9ydCB7YWRkSWNvbiwgTm90aWNlLCBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlld30gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRGFuZ2Vyem9uZVdyaXRpbmdQbHVnaW5TZXR0aW5ncyBmcm9tIFwiLi9EYW5nZXJ6b25lV3JpdGluZ1BsdWdpblNldHRpbmdzXCI7XHJcbmltcG9ydCBEYW5nZXJ6b25lV3JpdGluZ1BsdWdpblNldHRpbmdzVGFiIGZyb20gXCIuL0V4dHJhY3RIaWdobGlnaHRzUGx1Z2luU2V0dGluZ3NUYWJcIjtcclxuaW1wb3J0IENvdW50ZG93blRpbWVyIGZyb20gXCIuL0NvdW50ZG93blRpbWVyXCI7XHJcblxyXG5jb25zdCBzdmdQYXRoID0gJzxwYXRoIGQ9XCJNNDkuNTEyMiA5MEMyOS4zOTI2IDg5LjczNTUgMTMuMTQ2OCA3My41MzM3IDEyLjg4MTYgNTMuNDY4NUMxMy4xNDY4IDMzLjQwMzIgMjkuMzkyNiAxNy4yMDE0IDQ5LjUxMjIgMTYuOTM2OUM2OS42MzE5IDE3LjIwMTQgODUuODc3NiAzMy40MDMyIDg2LjE0MjggNTMuNDY4NUM4NS44Nzc2IDczLjUzMzcgNjkuNjMxOSA4OS43MzU1IDQ5LjUxMjIgOTBaTTQ5LjUxMjIgMjUuMDU1MUMzMy44NjM1IDI1LjI2MDUgMjEuMjI3OCAzNy44NjIxIDIxLjAyMTcgNTMuNDY4NUMyMS4yMjc4IDY5LjA3NDkgMzMuODYzNSA4MS42NzY0IDQ5LjUxMjIgODEuODgxOUM2NS4xNjA5IDgxLjY3NjQgNzcuNzk2NyA2OS4wNzQ5IDc4LjAwMjcgNTMuNDY4NUM3Ny43OTY3IDM3Ljg2MjEgNjUuMTYwOSAyNS4yNjA1IDQ5LjUxMjIgMjUuMDU1MVpNNTMuNTgyMyA3My43NjM4SDQ1LjQ0MjFWNTcuNTI3NUgyOS4xNjE5VjQ5LjQwOTRINDUuNDQyMVYzMy4xNzMySDUzLjU4MjNWNDkuNDA5NEg2OS44NjI1VjU3LjUyNzVINTMuNTgyM1Y3My43NjM4Wk04My4yNjEyIDI3LjkyODlMNzEuMDE0NCAxNS43NTE3TDc2Ljc0OTEgMTBMODkgMjIuMTc3Mkw4My4yNjEyIDI3LjkyNDhWMjcuOTI4OVpNMTUuNzY3MyAyNy45Mjg5TDEwIDIyLjE3NzJMMjIuMTczNiAxMEwyNy45MzI3IDE1Ljc0NzZMMTUuNzY3MyAyNy45MjQ4VjI3LjkyODlaXCIgZmlsbD1cIiM2NDY0NjRcIi8+JztcclxuYWRkSWNvbignd2F0Y2gnLCBzdmdQYXRoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhbmdlcnpvbmVXcml0aW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHB1YmxpYyBzZXR0aW5nczogRGFuZ2Vyem9uZVdyaXRpbmdQbHVnaW5TZXR0aW5ncztcclxuICAgIHN0YXR1c0JhcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBjb3VudGRvd246IENvdW50ZG93blRpbWVyO1xyXG5cclxuICAgIG9ubG9hZCgpIHtcclxuICAgICAgICB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRGFuZ2Vyem9uZVdyaXRpbmdQbHVnaW5TZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpXHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignd2F0Y2gnLCAnRGFuZ2Vyem9uZSBXcml0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0T3JDb250aW51ZVRpbWVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcclxuICAgICAgICAgICAgdGhpcy5hcHAub24oXCJjb2RlbWlycm9yXCIsIChjbTogQ29kZU1pcnJvci5FZGl0b3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNtLm9uKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleURvd24pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiBcImRhbmdlcnpvbmUtc2Vzc2lvbi1zdGFydFwiLFxyXG4gICAgICAgICAgICBuYW1lOiBcIlNob3J0Y3V0IGZvciBzdGFydGluZyBhIERhbmdlcnpvbmUgV3JpdGluZyBzZXNzaW9uXCIsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnN0YXJ0T3JDb250aW51ZVRpbWVyKCksXHJcbiAgICAgICAgICAgIGhvdGtleXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtcIkFsdFwiLCBcIlNoaWZ0XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogXCLigYRcIixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRPckNvbnRpbnVlVGltZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRDdXN0b21TdHlsZSgpO1xyXG5cclxuICAgICAgICBpZih0aGlzLmNvdW50ZG93biAmJiAhdGhpcy5jb3VudGRvd24uaXNGaW5pc2hlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnRkb3duLnJlc2V0Q291bnRkb3duKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3R5bGUoKTtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY291bnRkb3duLmludGVydmFsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gbmV3IERhbmdlcnpvbmVXcml0aW5nUGx1Z2luU2V0dGluZ3MoKTtcclxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkZWRTZXR0aW5ncyA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICAgICAgaWYgKGxvYWRlZFNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZvdW5kIGV4aXN0aW5nIHNldHRpbmdzIGZpbGUgZm9yIERhbmdlcnpvbmUgV3JpdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY291bnRkb3duU2Vjb25kcyA9IGxvYWRlZFNldHRpbmdzLmNvdW50ZG93blNlY29uZHM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNlY29uZHNVbnRpbERlbGV0aW9uID0gbG9hZGVkU2V0dGluZ3Muc2Vjb25kc1VudGlsRGVsZXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnN1Y2Nlc2Z1bGxTZXNzaW9uQ291bnQgPSBsb2FkZWRTZXR0aW5ncy5zdWNjZXNmdWxsU2Vzc2lvbkNvdW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21FZGl0b3JGb250U2l6ZSA9IGxvYWRlZFNldHRpbmdzLmN1c3RvbUVkaXRvckZvbnRTaXplO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21FZGl0b3JCYWNrZ3JvdW5kQ29sb3IgPSBsb2FkZWRTZXR0aW5ncy5jdXN0b21FZGl0b3JCYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNldHRpbmdzIGZpbGUgZm91bmQsIGNyZWF0aW5nIGZvciBEYW5nZXJ6b25lIFdyaXRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydFRpbWVyKCkge1xyXG4gICAgICAgIGxldCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XHJcbiAgICAgICAgY29uc3QgbWRWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYudmlldyBhcyBNYXJrZG93blZpZXc7XHJcblxyXG4gICAgICAgIGlmIChtZFZpZXcgJiYgbWRWaWV3LnNvdXJjZU1vZGUpIHtcclxuICAgICAgICAgICAgY29uc3QgY21FZGl0b3IgPSBtZFZpZXcuc291cmNlTW9kZS5jbUVkaXRvcjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbUVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGRvd24gPSBuZXcgQ291bnRkb3duVGltZXIodGhpcy5zZXR0aW5ncy5nZXRDb3VudGRvd25TZWNvbmRzSW50ZWdlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNtRWRpdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxlYWYsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5nZXRTZWNvbmRzVW50aWxEZWxldGlvbkludGVnZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRGFuZ2Vyem9uZSBXcml0aW5nIHNlc3Npb24gc3RhcnRlZCFcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gZWRpdG9yIGFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBmaWxlIG9wZW4uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVLZXlEb3duID0gKFxyXG4gICAgICAgIGNtOiBDb2RlTWlycm9yLkVkaXRvcixcclxuICAgICAgICBldmVudDogS2V5Ym9hcmRFdmVudFxyXG4gICAgKTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuY291bnRkb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnRkb3duLnJlc2V0U2Vjb25kVW50aWxEZWxldGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2V0Q3VzdG9tU3R5bGUoKSB7XHJcbiAgICAgICAgY29uc3QgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICBjc3MuaWQgPSAnZGFuZ2Vyem9uZS13cml0aW5nLXN0eWxlJztcclxuXHJcbiAgICAgICAgY29uc3QgY3VzdG9tRWRpdG9yRm9udFNpemVDc3NTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmdldEN1c3RvbUVkaXRvckZvbnRTaXplQ3NzU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRWRpdG9yQmFja2dyb3VuZENvbG9yID0gdGhpcy5zZXR0aW5ncy5nZXRDdXN0b21FZGl0b3JCYWNrZ3JvdW5kQ29sb3JDc3NTdHJpbmcoKTtcclxuXHJcbiAgICAgICAgY3NzLmlubmVyVGV4dCA9IGBcclxuICAgICAgICAgICAgI2FjdGl2ZS1kYW5nZXJ6b25lLWVkaXRvciB7IFxyXG4gICAgICAgICAgICAgICAgJHtjdXN0b21FZGl0b3JGb250U2l6ZUNzc1N0cmluZ307XHJcbiAgICAgICAgICAgICAgICAke2N1c3RvbUVkaXRvckJhY2tncm91bmRDb2xvcn07ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9YDtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGNzcyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0eWxlKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdjc3MtY2hhbmdlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlU3R5bGUoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhbmdlcnpvbmUtd3JpdGluZy1zdHlsZScpLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdjc3MtY2hhbmdlJyk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiU2V0dGluZyIsIlBsdWdpblNldHRpbmdUYWIiLCJOb3RpY2UiLCJhZGRJY29uIiwiRGFuZ2Vyem9uZVdyaXRpbmdQbHVnaW5TZXR0aW5nc1RhYiIsIlBsdWdpbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ25DLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO0FBQ3pDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFlBQVksS0FBSyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwRixRQUFRLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUMxRyxJQUFJLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQixDQUFDLENBQUM7QUFDRjtBQUNPLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDaEMsSUFBSSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLElBQUksU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO0FBQzNDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN6RixDQUFDO0FBdUNEO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxLQUFLLENBQUMsQ0FBQztBQUNQLENBQUM7QUFDRDtBQUNPLFNBQVMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDM0MsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JILElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDN0osSUFBSSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN0RSxJQUFJLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRTtBQUN0QixRQUFRLElBQUksQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUN0RSxRQUFRLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDdEIsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN6SyxZQUFZLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEQsWUFBWSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDekIsZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU07QUFDOUMsZ0JBQWdCLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUN4RSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztBQUNqRSxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUztBQUNqRSxnQkFBZ0I7QUFDaEIsb0JBQW9CLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUU7QUFDaEksb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7QUFDMUcsb0JBQW9CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRTtBQUN6RixvQkFBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENB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
